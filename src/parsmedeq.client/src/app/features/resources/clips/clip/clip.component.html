@if (item) {
  <div class="theme-container">
    <div class="breadcrumb">
      <a mat-button [routerLink]="['/clips' | langPack]">&larr; بازگشت به کلیپ‌ها</a>
    </div>

    <header class="hero" [style.backgroundImage]="'url(' + item.image + ')'">
      <div class="overlay"></div>
      <div class="hero-body fade-in">
        <div class="meta">
          <span class="cat">{{ item.resourceCategoryTitle }}</span>
          <span class="date">{{ item.publishDate }}</span>
        </div>
        <h1 class="title">{{ item.title }}</h1>
        <p class="short" [innerHTML]="item.description | safeHtml"></p>
        <div class="hero-actions">
          <button mat-raised-button color="primary" (click)="openPlayer()">پخش ویدیو</button>
        </div>
      </div>
    </header>

    @if ((item.fileId ?? 0) > 0) {
      <div class="w-25 mb-5">
        @if (item.purchased || item.price === 0) {
          <app-download-management [id]="item.fileId ?? 0" [price]="item.price" [tableId]="Tables.Article">
          </app-download-management>
        } @else {
          <app-cart-item-control
            [relatedId]="item!.id"
            [tableId]="Tables.Article"
            [relatedName]="item!.title"
            [unitPrice]="item!.price ?? 0"
            [stock]="item!.stock ?? 99999999">
          </app-cart-item-control>
        }
      </div>
    }

    <main class="content fade-in">
      <section class="desc">
        <h3>توضیحات</h3>
        <p [innerHTML]="item.description"></p>
        <div class="tags" *ngIf="item.keywords?.length">
          <span class="tag" *ngFor="let t of item.keywords">#{{ t }}</span>
        </div>
      </section>

      <!--<section class="related" *ngIf="item.related?.length">
        <h3>کلیپ‌های مرتبط</h3>
        <div class="rel-grid">
          <article class="rel-card" *ngFor="let r of item.related" (click)="goToClip(r)">
            <img [src]="r.thumbnail" alt="{{ r.title }}">
            <div class="rmeta">
              <h4>{{ r.title }}</h4>
              <p class="rdate">{{ getDate(r.publishDate) }}</p>
            </div>
          </article>
        </div>
      </section>-->
    </main>
  </div>
} @else {
  <div class="loading container">در حال بارگذاری...</div>
}
