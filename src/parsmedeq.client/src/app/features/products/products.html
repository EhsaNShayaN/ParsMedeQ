<div class="theme-container" [@listStagger]="items.length">
  <div class="toolbar-row mt-3">
    <div class="breadcrumbs">فروشگاه › همه محصولات</div>
    <!-- filters / sort can be added here -->
  </div>
  <div fxLayout="row wrap" class="agents-wrapper">
    <div fxLayout="row wrap" fxFlex="100" fxFlex.gt-sm="100">
      <div fxFlex="100" fxFlex.gt-md="100" fxFlex.gt-sm="100" fxFlex.sm="100" fxLayout="row wrap">
        <div fxFlex="100">
          <mat-card appearance="outlined">
            <div class="widget">
              <mat-card-title>
                <h4 class="pt-3 ps-3">
                  {{ 'PRODUCTS' | translate }}
                  {{ title }}
                </h4>
              </mat-card-title>
              <mat-card-content class="mt-3">
                <div class="grid">
                  <mat-card class="product-card" *ngFor="let p of items">
                    <div class="media" (click)="goToDetail(p)" role="button" tabindex="0">
                      <img mat-card-image [src]="p.image" [alt]="p.title" loading="lazy"/>
                    </div>
                    <mat-card-content>
                      <h3 class="title text-left" (click)="goToDetail(p)">{{ p.title }}</h3>
                      <div class="meta">
                        <span class="price" *ngIf="p.discount && p.discount > 0">
                          <span
                            class="final">{{ formatPrice(Math.round((p.price ?? 0) * (1 - (p.discount / 100)))) }}</span>
                          <span class="original">{{ formatPrice(p.price ?? 0) }}</span>
                        </span>
                        <span class="price" *ngIf="!p.discount || p.discount === 0">
                          <span class="final">{{ formatPrice(p.price ?? 0) }}</span>
                        </span>
                      </div>

                      <p class="desc">{{ p.description }}</p>
                    </mat-card-content>

                    <mat-card-actions class="card-actions">
                      <button mat-stroked-button color="primary" (click)="goToDetail(p)">جزئیات</button>
                      <button mat-raised-button color="primary" (click)="goToDetail(p)">افزودن به سبد</button>
                    </mat-card-actions>
                  </mat-card>
                </div>
              </mat-card-content>
            </div>
          </mat-card>
        </div>
        <div *ngIf="items?.length" fxFlex="100" fxLayoutAlign="center center">
          <app-load-more [step]="1"></app-load-more>
        </div>
      </div>
    </div>
  </div>
</div>
